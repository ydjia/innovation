<!--<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
-->
<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,Chrome=1">
	<meta name="renderer" content="webkit">
	<meta name="keywords" content="">
	<meta name="description" content="">
	<title>注册 - 三大赛</title>
	<link href="http://wenda.ghostchina.com/static/css/default/ico/favicon.ico?v=20140930" rel="shortcut icon" type="image/x-icon">
	<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="css/font-awesome.min.css">
	<!-- <link rel="stylesheet" type="text/css" href="css/icon.css"> -->
	<link rel="stylesheet" type="text/css" href="css/common.css">
	<link rel="stylesheet" type="text/css" href="css/link.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<link rel="stylesheet" type="text/css" href="css/register.css">
	<link rel="stylesheet" type="text/css" href="css/user.css">
	<script type="text/javascript">
		var _739D4E0BA5E5EB479CF3581D246EFB2B='';
		var G_POST_HASH=_739D4E0BA5E5EB479CF3581D246EFB2B;
		var G_INDEX_SCRIPT = '';
		var G_SITE_NAME = '三大赛注册';
		var G_BASE_URL = 'http://wenda.ghostchina.com';
		var G_STATIC_URL = 'http://wenda.ghostchina.com/static';
		var G_UPLOAD_URL = 'http://wenda.ghostchina.com/uploads';
		var G_USER_ID = '';
		var G_USER_NAME = '';
		var G_UPLOAD_ENABLE = 'N';
		var G_UNREAD_NOTIFICATION = 0;
		var G_NOTIFICATION_INTERVAL = 100000;
		var G_CAN_CREATE_TOPIC = '';
	</script>
	<style type="text/css" adt="123"></style>
	<script src="js/jquery.2.js" type="text/javascript"></script>
	<script src="js/jquery.form.js" type="text/javascript"></script>
	<script src="js/plug-in_module.js" type="text/javascript"></script>
	<script src="js/aws.js" type="text/javascript"></script>
	<script src="js/aw_template.js" type="text/javascript"></script>
	<script src="js/app.js" type="text/javascript"></script>
	<script src="js/compatibility.js" type="text/javascript"></script>
	<style type="text/css">
		.fancybox-margin
		{
			margin-right:17px;
		}
	</style>
</head>
<body>
<noscript unselectable="on" id="noscript">
    &lt;div class="aw-404 aw-404-wrap container"&gt;
        &lt;img src="http://wenda.ghostchina.com/static/common/no-js.jpg"&gt;
        &lt;p&gt;你的浏览器禁用了JavaScript, 请开启后刷新浏览器获得更好的体验!&lt;/p&gt;
    &lt;/div&gt;
</noscript>
<div class="top-bar opacity">
		<div class="col-md-12 logo">
				<span class="name"><i class="icon-leaf"></i><a href="index.html" class="name">三大赛</a>-创新奖</span>
				<a href="" class="pull-right user"><i class="icon-user"></i> 用户</a>
			</div>


	</div>
<div class="aw-register-box">
	<div class="mod-head">
		<h1>注册新用户</h1>
	</div>
	<div class="mod-body">
		<form class="aw-register-form" action="registProcess" method="post" id="register_form">				
			<ul>
				<li class="alert alert-danger hide error_message text-left">
					<i class="icon icon-delete"></i> <em></em>
				</li>
				<li>
					<input class="aw-register-name form-control" type="text" name="username" placeholder="用户名" tips="请输入一个 2-14 位的用户名" errortips="用户名长度不符合" value="">
				</li>
				<li>
					<input class="aw-register-email form-control" type="text" placeholder="邮箱" name="email" tips="请输入你常用的电子邮箱作为你的账号" value="" errortips="邮箱格式不正确">
				</li>
				<li>
					<input class="aw-register-pwd form-control" type="password" name="password" placeholder="密码" tips="请输入 6-16 个字符,区分大小写" errortips="密码不符合规则">
				</li>
				<li>
					<input class="aw-register-pwd form-control" type="password" name="passwordConfirm" placeholder="确认密码" tips="请重复输入上面的密码" errortips="两次密码不一致">
				</li>
                <li>
                	<select class="form-control" name="role" tips="请选择一个用户身份" errortips="还未选择用户身份" onFocus="role_choose_tips()">
                    	<option>请选择用户身份</option>
                    	<option>学生</option>
                        <option>老师</option>
                    </select>
                </li>	
					
				<li class="clearfix">
					<!-- <a href="user.html" class="btn btn-large btn-blue btn-block">注册</a> -->
					<input id="regist-submit" type="submit" value="注册" class="btn btn-large btn-blue btn-block"/>
				</li>
                <li class="clearfix">
                <a href="login" class="last">已有账户,直接登录</a>
                </li>
			</ul>
		</form>
	</div>
</div>

<script type="text/javascript">
var usernameValidity = false,
	passwordValidity = false;
	passwordConfirmValidity = false;
	emailValidity = false;
	roleValidity = false;
	function role_choose_tips(){
		$(this).parent().find('.aw-reg-tips').detach();
		if (typeof $(this).attr('tips') != 'undefined' && $(this).attr('tips') != '')
		{
			$(this).parent().append('<span class="aw-reg-tips">' + $(this).attr('tips') + '</span>');
		}
	}
$(document).ready(function ()
{
	
		$('#regist-submit').click(
			function(){
				return usernameValidity && passwordValidity && passwordConfirmValidity && emailValidity && roleValidity;				
			}		
		);
		
    verify_register_form('#register_form');
	
    /* 注册页面验证 */
	function verify_register_form(element)
	{
	    $(element).find('[type=text], [type=password],select[name="role"]').on({
	        focus : function()
	        {
				$(this).parent().find('.aw-reg-tips').detach();
	            if (typeof $(this).attr('tips') != 'undefined' && $(this).attr('tips') != '')
	            {
	                $(this).parent().append('<span class="aw-reg-tips">' + $(this).attr('tips') + '</span>');
	            }
	        },
	        blur : function()
	        {
	        	if ($(this).attr('tips') != '')
	        	{
	        		switch ($(this).attr('name'))
		            {
		                case 'username' : 
		                    var _this = $(this);
		                    $(this).parent().find('.aw-reg-tips').detach();
		                    if ($(this).val().length >= 0 && $(this).val().length < 2)
		                    {
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
		                        usernameValidity = false;
		                        return;
		                    }
		                    else if ($(this).val().length > 17)
		                    {
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
		                        usernameValidity = false;
		                        return;
		                    }
		                    else
		                    {
		                    	var url = 'registCheck!usernameCheck';
		    					//var params = $('#form1').serialize();
		    					var params =  {username:$(this).val()}; 
		                    	$.post(	url, 
		                    			params,
		                    			function(result){
		                    				
		                    				var res = eval("(" + result + ")").valid;
		                    				
		                    				if(res == 'false'){
		                    					
		                    					_this.parent().find('.aw-reg-tips').detach();
		                    					_this.parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + '用户名已存在 ' + '</span>');
		                    					usernameValidity = false;
		                    				}else{
		                    					usernameValidity = true;
		                    					_this.parent().find('.aw-reg-tips').detach();
				                                _this.parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');
		                    				}
		                    			}
		                    	);
		                    }
		                    return;

		                case 'email' : 
		                	var _this = $(this);
		                    $(this).parent().find('.aw-reg-tips').detach();
		                    var emailreg = /^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/;
		                    if (!emailreg.test($(this).val()))
		                    {
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
		                        emailValidity = false;
		                        return;
		                    }
		                    else
		                    {
		                    	var url = 'registCheck!emailCheck';
		    					var params =  {email:$(this).val()}; 
		                    	$.post(	url, 
		                    			params,
		                    			function(result){
		                    				var res = eval("(" + result + ")").valid;
		                    				if(res == 'false'){
		                    					_this.parent().find('.aw-reg-tips').detach();
				                                _this.parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + '该email已被注册' + '</span>');
				                                emailValidity = false;
		                    				}else{
		                    					emailValidity = true;
		                    					_this.parent().find('.aw-reg-tips').detach();
				                                _this.parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');
		                    				}
		                    			}
		                    	);
		                    }        
		                    return;

		                case 'password' :
		                    $(this).parent().find('.aw-reg-tips').detach();
		                    if ($(this).val().length >= 0 && $(this).val().length < 6)
		                    {
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
		                        passwordValidity = false;
		                        return;
		                    }
		                    if ($(this).val().length > 17)
		                    {
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
		                        passwordValidity = false;
		                        return;
		                    }
		                    else
		                    {
		                    	passwordValidity = true;
		                        $(this).parent().find('.aw-reg-tips').detach();
		                        $(this).parent().append('<span class="aw-reg-tips aw-reg-right"><i class="aw-icon i-followed"></i></span>');
		                    }
		                    return;
						case 'passwordConfirm' :
							$(this).parent().find('.aw-reg-tips').detach();
							if($(this).val() != $("input[name='password']").val()){
								$(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
								passwordConfirmValidity = false;
		                        return;	
							}else{
								passwordConfirmValidity = true;
								return;
							}
						case 'role' :
							$(this).parent().find('.aw-reg-tips').detach();
							if($(this).val() == "请选择用户身份"){
								$(this).parent().append('<span class="aw-reg-tips aw-reg-err"><i class="aw-icon i-err"></i>' + $(this).attr('errortips') + '</span>');
								roleValidity = false;
								return;
							}else{
								roleValidity = true;
								return;
							}	
		            }
	        	}
	            
	        }
	    });
		
	}
	
});

</script>

<div class="aw-footer-wrap">
	<div class="aw-footer">
		Copyright © 2014<span class="hidden-xs"> - 北京邮电大学信息科技中心, All Rights Reserved</span>
		<span class="hide">Powered By <a href="http://www.wecenter.com/?copyright" target="blank">WeCenter 3.0 Beta 2</a></span>	
	</div>
</div>
<a class="aw-back-top hidden-xs" href="javascript:;" onclick="$.scrollTo(1, 600, {queue:true});"><i class="icon icon-up"></i></a>
<!-- DO NOT REMOVE -->
<div id="aw-ajax-box" class="aw-ajax-box"></div>
<div style="display:none;" id="__crond"><img src="../参考资料/注册界面/注册 - Ghost中文网_files/1414803427" width="1" height="1"></div>
<!-- Escape time: 0.011963844299316 --><!-- / DO NOT REMOVE -->
</body>
</html>

    